{"version":3,"sources":["webpack:///src/views/map/terminalHistoryTrack.vue","webpack:///./src/views/map/terminalHistoryTrack.vue?d1b9","webpack:///./src/views/map/terminalHistoryTrack.vue?dfb3","webpack:///./src/views/map/terminalHistoryTrack.vue","webpack:///./node_modules/core-js/modules/es6.regexp.search.js","webpack:///./node_modules/core-js/modules/_same-value.js","webpack:///./src/views/map/terminalHistoryTrack.vue?039d"],"names":["name","data","map","mapUrl","_navbar","_searchbar","_postionbar","_vectorBaseMapLayer","_satBaseMapLayerGroup","_streetMapLayerGroup","_gpsLayerGroup","_trackLayerGroup","_fenceLayerGroup","_miniMapBaseVectorMapLayer","_miniMapCtrl","_miniMapLayerGroup","index","_measureArea","_measureRuler","_btnCentre","_levelCtrl","_zoomCtrl","_fenceBar","_routeBar","dataSavedInServer","options","lng","serverIP","mapDefaultLevel","domain","local","cn","position","my_position","zoom_in","zoom_out","distance","bearing","language_sel_lab","language_sel_item_cn","language_sel_item_en","setting_dlg_btn_save","setting_dlg_btn_cancel","setting_dlg_title","outFence","en","mounted","this","init","getTerminaltraces","methods","_createDetail2","obj","hasOwnProperty","p","innerHTML","content","div","_createDetail1","winHeight","document","documentElement","clientHeight","clientWidth","$","height","window","resize","L","attributionControl","zoomControl","control","Control","LevelControl","tileLayer","_this","minZoom","maxZoom","Subdomains","layerGroup","MiniMap","toggleDisplay","PostionBar","setMiniMap","Measure","primaryLengthUnit","secondaryLengthUnit","primaryAreaUnit","Ruler","circleMarker","color","radius","lineStyle","dashArray","lengthUnit","display","decimal","factor","label","angleUnit","FenceBar","setEventHanlder","_fenceEventHandler","deserializeFenceFromArray","fence","RouteBar","_routeEventHandler","deserializeRouteFromArray","route","query","location","search","substring","values","split","pos","indexOf","value","card","startTime","endTime","_saveDataToServer","updateDevice","extObj","pt","uuid","title","id","cardNum","latitude","toString","longitude","lat","time","gpstime","type","detail","terminalAeraName","zone","numInZone","typeDesc","f_ret","checkFences","outFences","length","_notify","setView","latLng","updatePoint","updateTrack","updateCenter","number","_loadAllDevices","_onNavbarRoadnet","state","addTo","setZIndex","remove","_onNavbarSatmap","hasLayer","_onNavbarDevMan","_onNavbarFence","_onNavbarTool","_onNavbarSetting","showSettingDialog","_onNavbarTest","devs_json","centre_json","devs","JSON","parse","center","i","len","dev","notify","_tranPosition","objs","segs","DomUtil","create","css","span","input","attr","append","dialog","autoOpen","modal","resizable","buttons","render","_vm","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","attrs","component","anObject","sameValue","regExpExec","defined","SEARCH","$search","maybeCallNative","regexp","O","fn","undefined","call","RegExp","String","res","done","rx","S","previousLastIndex","lastIndex","result","module","exports","Object","is","x","y"],"mappings":"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","file":"public/js/chunk-54d96d0a.568f13e4.js","sourcesContent":["<template>\r\n  <div id=\"map-box\" class=\"map\">\r\n    <div id=\"mymap\" class=\"my-map\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getTerminalHistoryTrack, getBdLocateList } from \"network/mainRuequest\";\r\n\r\nexport default {\r\n  name: \"map-box\",\r\n  data() {\r\n    return {\r\n      map: null,\r\n      mapUrl: \"http://www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}\",\r\n      _navbar: null,\r\n      _searchbar: null,\r\n      _postionbar: null,\r\n\r\n      _vectorBaseMapLayer: null,\r\n      _satBaseMapLayerGroup: null,\r\n      _streetMapLayerGroup: null,\r\n      _gpsLayerGroup: null,\r\n      _trackLayerGroup: null,\r\n      _fenceLayerGroup: null,\r\n\r\n      _miniMapBaseVectorMapLayer: null,\r\n      _miniMapCtrl: null,\r\n      _miniMapLayerGroup: null,\r\n      index: 0,\r\n      //tool\r\n      _measureArea: null,\r\n      _measureRuler: null,\r\n      //\r\n      _btnCentre: null,\r\n      //level ctrl\r\n      _levelCtrl: null,\r\n      //zoom ctrl\r\n      _zoomCtrl: null,\r\n      //fence ctrl bar\r\n      _fenceBar: null,\r\n      //route ctrl bar\r\n      _routeBar: null,\r\n      dataSavedInServer: null,\r\n      options: {\r\n        lng: \"cn\",\r\n        //serverIP:'127.0.0.1',\r\n        serverIP: \"192.168.0.177\",\r\n        mapDefaultLevel: 14,\r\n        //domain: 'http://192.168.0.88'\r\n        domain: \"\"\r\n      },\r\n      local: {\r\n        cn: {\r\n          position: \"坐标：\",\r\n          my_position: \"本机位置\",\r\n          zoom_in: \"放大\",\r\n          zoom_out: \"缩小\",\r\n          distance: \"距离:\",\r\n          bearing: \"角度:\",\r\n          language_sel_lab: \"语言\",\r\n          language_sel_item_cn: \"中文\",\r\n          language_sel_item_en: \"英文\",\r\n          setting_dlg_btn_save: \"保存\",\r\n          setting_dlg_btn_cancel: \"取消\",\r\n          setting_dlg_title: \"系统设置\",\r\n          outFence: \"跃出电子围栏\"\r\n        },\r\n        en: {\r\n          position: \"coordinate：\",\r\n          my_position: \"The native place\",\r\n          zoom_in: \"zoom in\",\r\n          zoom_out: \"zoom out\",\r\n          distance: \"distance:\",\r\n          bearing: \"bearing:\",\r\n          language_sel_lab: \"language\",\r\n          language_sel_item_cn: \"chinese\",\r\n          language_sel_item_en: \"english\",\r\n          setting_dlg_btn_save: \"save\",\r\n          setting_dlg_btn_cancel: \"cancel\",\r\n          setting_dlg_title: \"system setting\",\r\n          outFence: \"out of fence\"\r\n        }\r\n      }\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n    this.getTerminaltraces();\r\n  },\r\n  methods: {\r\n    _createDetail2(obj) {\r\n      let div = L.DomUtil.create(\"div\", \"\", \"\");\r\n      let p = L.DomUtil.create(\"p\", \"text-left font-weight-bold\", div);\r\n      let content = \"\";\r\n\r\n      if (obj.hasOwnProperty(\"lat\"))\r\n        content += \"经纬度:\" + obj.lng + \"° , \" + obj.lat + \"°\" + \"<br/>\";\r\n      if (obj.hasOwnProperty(\"name\"))\r\n        content += \"指挥机名称：\" + obj.name + \"<br/>\";\r\n      if (obj.hasOwnProperty(\"cardNum\"))\r\n        content += \"指挥机卡号：\" + obj.cardNum + \"<br/>\";\r\n      if (obj.hasOwnProperty(\"longitude\"))\r\n        content +=\r\n          \"经纬度:\" + obj.longitude + \"° , \" + obj.latitude + \"°\" + \"<br/>\";\r\n\r\n      p.innerHTML = content;\r\n\r\n      return div;\r\n    },\r\n    _createDetail1(obj) {\r\n      let div = L.DomUtil.create(\"div\", \"\", \"\");\r\n      let p = L.DomUtil.create(\"p\", \"text-left font-weight-bold\", div);\r\n      let content = \"\";\r\n\r\n      if (obj.hasOwnProperty(\"name\"))\r\n        content += \"终端名称：\" + obj.name + \"<br/>\";\r\n      if (obj.hasOwnProperty(\"cardNum\"))\r\n        content += \"终端卡号：\" + obj.cardNum + \"<br/>\";\r\n      if (obj.hasOwnProperty(\"longitude\"))\r\n        content +=\r\n          \"经纬度：\" + obj.longitude + \"° , \" + obj.latitude + \"°\" + \"<br/>\";\r\n      if (obj.hasOwnProperty(\"locateTime\"))\r\n        content += \"定位时间：\" + obj.locateTime + \"<br/>\";\r\n      p.innerHTML = content;\r\n      return div;\r\n    },\r\n    init() {\r\n      let _this = this;\r\n      var winWidth = 0;\r\n      var winHeight = 0;\r\n\r\n      if (\r\n        document.documentElement &&\r\n        document.documentElement.clientHeight &&\r\n        document.documentElement.clientWidth\r\n      ) {\r\n        winHeight = document.documentElement.clientHeight;\r\n        winWidth = document.documentElement.clientWidth;\r\n      }\r\n\r\n      if (this.dataSavedInServer != null) {\r\n        this.options.lng = this.dataSavedInServer.lng;\r\n      }\r\n\r\n      $(\"#mymap\").height(winHeight);\r\n      $(window).resize(function() {\r\n        if (\r\n          document.documentElement &&\r\n          document.documentElement.clientHeight &&\r\n          document.documentElement.clientWidth\r\n        ) {\r\n          winHeight = document.documentElement.clientHeight;\r\n          winWidth = document.documentElement.clientWidth;\r\n        }\r\n        $(\"#mymap\").height(winHeight);\r\n      });\r\n\r\n      this.map = L.map(\"mymap\", {\r\n        attributionControl: false,\r\n        zoomControl: false\r\n      }).setView([34.3468421, 108.9365887], this.options.mapDefaultLevel);\r\n\r\n      //鼠标位置控件\r\n      L.control\r\n        .mousePosition({\r\n          separator: \",\",\r\n          lngFirst: true,\r\n          numDigits: 6,\r\n          prefix: this.local[this.options.lng].position\r\n        })\r\n        .addTo(_this.map);\r\n      //地图级数控件\r\n      this._levelCtrl = new L.Control.LevelControl({\r\n        lng: this.options.lng\r\n      }).addTo(_this.map);\r\n      //比例尺控件\r\n      L.control\r\n        .scale({\r\n          maxWidth: 200,\r\n          imperial: false\r\n        })\r\n        .addTo(_this.map);\r\n\r\n      this._vectorBaseMapLayer = L.tileLayer(_this.mapUrl, {\r\n        minZoom: 3,\r\n        maxZoom: 17,\r\n        Subdomains: []\r\n      })\r\n        .addTo(_this.map)\r\n        .setZIndex(0);\r\n\r\n      this._satBaseMapLayerGroup = L.layerGroup();\r\n      L.tileLayer(_this.mapUrl, {\r\n        minZoom: 0,\r\n        maxZoom: 8\r\n      }).addTo(this._satBaseMapLayerGroup);\r\n      L.tileLayer(_this.mapUrl, {\r\n        minZoom: 3,\r\n        maxZoom: 17,\r\n        Subdomains: []\r\n      }).addTo(this._satBaseMapLayerGroup);\r\n\r\n      this._streetMapLayerGroup = L.layerGroup();\r\n      L.tileLayer(_this.mapUrl, {\r\n        minZoom: 0,\r\n        maxZoom: 8,\r\n        Subdomains: []\r\n      }).addTo(this._streetMapLayerGroup);\r\n\r\n      this._miniMapBaseVectorMapLayer = L.tileLayer(_this.mapUrl, {\r\n        minZoom: 0,\r\n        maxZoom: 13,\r\n        Subdomains: []\r\n      });\r\n\r\n      this._miniMapLayerGroup = L.layerGroup([this._miniMapBaseVectorMapLayer]);\r\n      this._miniMapCtrl = new L.Control.MiniMap(this._miniMapLayerGroup, {\r\n        toggleDisplay: true\r\n      }).addTo(_this.map);\r\n      //zoom ctrl\r\n      this._zoomCtrl = L.control\r\n        .zoom({\r\n          position: \"bottomright\",\r\n          zoomInTitle: this.local[this.options.lng].zoom_in,\r\n          zoomOutTitle: this.local[this.options.lng].zoom_out\r\n        })\r\n        .addTo(_this.map);\r\n\r\n      this._postionbar = new L.Control.PostionBar(_this.map, {\r\n        lng: this.options.lng,\r\n        serverIP: this.options.serverIP\r\n      });\r\n      this._postionbar.setMiniMap(this._miniMapCtrl, this._miniMapLayerGroup);\r\n\r\n      this._measureArea = new L.Control.Measure({\r\n        primaryLengthUnit: \"meters\",\r\n        secondaryLengthUnit: \"kilometers\",\r\n        primaryAreaUnit: \"sqmeters\",\r\n        secondaryLengthUnit: \"hectares\",\r\n        activeColor: \"#ff0000\",\r\n        completedColor: \"#0000ff\",\r\n        localization: this.options.lng\r\n      });\r\n\r\n      this._measureRuler = new L.Control.Ruler({\r\n        position: \"topright\", // Leaflet control position option\r\n        circleMarker: {\r\n          // Leaflet circle marker options for points used in this plugin\r\n          color: \"red\",\r\n          radius: 2\r\n        },\r\n        lineStyle: {\r\n          // Leaflet polyline options for lines used in this plugin\r\n          color: \"red\",\r\n          dashArray: \"1,6\"\r\n        },\r\n        lengthUnit: {\r\n          // You can use custom length units. Default unit is kilometers.\r\n          display: \"km\", // This is the display value will be shown on the screen. Example: 'meters'\r\n          decimal: 2, // Distance result will be fixed to this value.\r\n          factor: null, // This value will be used to convert from kilometers. Example: 1000 (from kilometers to meters)\r\n          label: this.local[this.options.lng].distance\r\n        },\r\n        angleUnit: {\r\n          display: \"&deg;\", // This is the display value will be shown on the screen. Example: 'Gradian'\r\n          decimal: 2, // Bearing result will be fixed to this value.\r\n          factor: null, // This option is required to customize angle unit. Specify solid angle value for angle unit. Example: 400 (for gradian).\r\n          label: this.local[this.options.lng].bearing\r\n        }\r\n      });\r\n\r\n      this._fenceBar = new L.Control.FenceBar(_this.map, {\r\n        lng: this.options.lng\r\n      });\r\n      this._fenceBar.setEventHanlder(this._fenceEventHandler, this);\r\n      if (\r\n        this.dataSavedInServer != null &&\r\n        this.dataSavedInServer.fence != null\r\n      ) {\r\n        this._fenceBar.deserializeFenceFromArray(this.dataSavedInServer.fence);\r\n      }\r\n\r\n      this._routeBar = new L.Control.RouteBar({\r\n        lng: this.options.lng\r\n      });\r\n      this._routeBar.setEventHanlder(this._routeEventHandler, this);\r\n      if (\r\n        this.dataSavedInServer != null &&\r\n        this.dataSavedInServer.route != null\r\n      ) {\r\n        this._routeBar.deserializeRouteFromArray(this.dataSavedInServer.route);\r\n      }\r\n    },\r\n\r\n    //得到终端的历史轨迹\r\n    getTerminaltraces(msg) {\r\n      let _this = this;\r\n      var query = location.search.substring(1);\r\n      var values = query.split(\"&\");\r\n\r\n      var pos = values[0].indexOf(\"=\");\r\n      var paramname = values[0].substring(0, pos);\r\n      var value = values[0].substring(pos + 1);\r\n      pos = values[1].indexOf(\"=\");\r\n      paramname = values[1].substring(0, pos);\r\n      let startTime = values[1].substring(pos + 1);\r\n      pos = values[2].indexOf(\"=\");\r\n      paramname = values[2].substring(0, pos);\r\n      let endTime = values[2].substring(pos + 1);\r\n\r\n      getTerminalHistoryTrack({\r\n        card: value,\r\n        startTime,\r\n        endTime\r\n      })\r\n        .then(res => {\r\n          let { data } = res;\r\n          if (data !== \"\") {\r\n            _this.map.setView(\r\n              L.latLng([data.data[0].latitude, data.data[0].longitude]),\r\n              _this.options.mapDefaultLevel\r\n            );\r\n          } else {\r\n            this.$alert(`${data.message}`, \"系统提示\", {\r\n              confirmButtonText: \"确定\"\r\n            });\r\n            return;\r\n          }\r\n          _this.terminalLayer = L.featureGroup();\r\n          _this.lineLayer = L.layerGroup();\r\n          let pts = [];\r\n          if (data.data.length > 0) {\r\n            let mk = L.marker(\r\n              L.latLng([data.data[0].latitude, data.data[0].longitude]),\r\n              {\r\n                icon: _this._routeBar._createIcon(\"qidian\")\r\n              }\r\n            ).bindPopup(_createDetail1(data.data[0]));\r\n            mk.dataModel = data.data[0];\r\n            mk.shape = \"marker\";\r\n            mk.application = \"routebar\";\r\n            mk.addTo(_this.terminalLayer);\r\n          }\r\n          for (let i = 2; i < data.data.length - 2; i += 5) {\r\n            let mk = L.marker(\r\n              L.latLng([data.data[i].latitude, data.data[i].longitude]),\r\n              {\r\n                icon: _this._routeBar._createIcon(\"tujing\")\r\n              }\r\n            ).bindPopup(_createDetail1(data.data[i]));\r\n            mk.dataModel = data.data[i];\r\n            mk.shape = \"marker\";\r\n            mk.application = \"routebar\";\r\n            mk.addTo(_this.terminalLayer);\r\n          }\r\n          if (data.data.length > 0) {\r\n            let mk = L.marker(\r\n              L.latLng([\r\n                data.data[data.data.length - 1].latitude,\r\n                data.data[data.data.length - 1].longitude\r\n              ]),\r\n              {\r\n                icon: _this._routeBar._createIcon(\"zhongdian\")\r\n              }\r\n            ).bindPopup(_createDetail1(data.data[data.data.length - 1]));\r\n            mk.dataModel = data.data[data.data.length - 1];\r\n            mk.shape = \"marker\";\r\n            mk.application = \"routebar\";\r\n            mk.addTo(_this.terminalLayer);\r\n          }\r\n\r\n          for (let i = 0; i < data.data.length; i++) {\r\n            pts.push(L.latLng([data.data[i].latitude, data.data[i].longitude]));\r\n            let pl = L.polyline(pts, {\r\n              color: \"red\"\r\n            }).addTo(_this.lineLayer);\r\n          }\r\n          _this.terminalLayer.addTo(_this.map);\r\n          _this.lineLayer.addTo(_this.map);\r\n          L.polylineDecorator(pts, {\r\n            patterns: [\r\n              {\r\n                offset: 25,\r\n                repeat: 50,\r\n                symbol: L.Symbol.arrowHead({\r\n                  pixelSize: 15,\r\n                  pathOptions: {\r\n                    fillOpacity: 1,\r\n                    weight: 0\r\n                  }\r\n                })\r\n              }\r\n            ]\r\n          }).addTo(_this.map);\r\n          if (data.data.length > 0) {\r\n            _this.map.setView(\r\n              L.latLng([data.data[0].latitude, data.data[0].longitude]),\r\n              _this.options.mapDefaultLevel\r\n            );\r\n          } else {\r\n            this.$alert(`该终端没有历史位置信息！`, \"系统提示\", {\r\n              confirmButtonText: \"确定\"\r\n            });\r\n          }\r\n        })\r\n        .catch(err => console.log(err));\r\n    },\r\n\r\n    _fenceEventHandler(msg) {\r\n      this._saveDataToServer();\r\n    },\r\n    updateDevice(extObj) {\r\n      let _this = this;\r\n      var obj = extObj;\r\n      var pt = {\r\n        uuid: obj.uuid,\r\n        title: obj.name,\r\n        id: obj.cardNum,\r\n        position: obj.latitude.toString() + \",\" + obj.longitude.toString(),\r\n        lat: obj.latitude,\r\n        lng: obj.longitude,\r\n        time: obj.gpstime,\r\n        type: \"device\",\r\n        detail: \"\",\r\n        terminalAeraName: obj.terminalAeraName,\r\n        zone: obj.zone,\r\n        numInZone: obj.numInZone,\r\n        typeDesc: obj.typeDesc\r\n      };\r\n      //var processed_pt = this._postionbar._nearest(pt);\r\n      /*if(!this._fenceBar.isInFences(pt)){\r\n\t\t\t\t\tthis._notify(pt.title + '(' + pt.id + ')' + this.local[this.options.lng].outFence);\r\n\t\t\t\t}*/\r\n\r\n      var f_ret = this._fenceBar.checkFences(pt);\r\n      if (f_ret.outFences.length > 0) {\r\n        this._notify(\r\n          pt.title +\r\n            \"(\" +\r\n            pt.id +\r\n            \")\" +\r\n            this.local[this.options.lng].outFence +\r\n            \": \" +\r\n            f_ret.outFences.join()\r\n        );\r\n      }\r\n      _this.map.setView(L.latLng(pt.lat, pt.lng), this.options.mapDefaultLevel);\r\n      this._postionbar.updatePoint(pt, true);\r\n      this._postionbar.updateTrack(pt.id, [pt], true, true, true);\r\n    },\r\n\r\n    updateCenter(extObj) {\r\n      let _this = this;\r\n      var obj = extObj;\r\n      var pt = {\r\n        uuid: obj.uuid,\r\n        title: obj.name == null ? \"指挥机\" : obj.name,\r\n        id: obj.number == null ? \"000000\" : obj.number,\r\n        position: obj.latitude.toString() + \",\" + obj.longitude.toString(),\r\n        lat: obj.latitude,\r\n        lng: obj.longitude,\r\n        time: obj.gpstime,\r\n        type: \"center\",\r\n        detail: \"\"\r\n      };\r\n      // ============================ STOP ======================================\r\n      //var processed_pt = this._postionbar._nearest(pt);\r\n      _this.map.setView(\r\n        L.latLng([pt.lat, pt.lng]),\r\n        this.options.mapDefaultLevel\r\n      );\r\n      /*if(!this._fenceBar.isInFences(pt)){\r\n\t\t\t\t\tthis._notify(pt.title + '(' + pt.id + ')' + this.local[this.options.lng].outFence);\r\n\t\t\t\t}*/\r\n      var f_ret = this._fenceBar.checkFences(pt);\r\n      if (f_ret.outFences.length > 0) {\r\n        this._notify(\r\n          pt.title + \"(\" + pt.id + \")\" + this.local[this.options.lng].outFence\r\n        ) +\r\n          \": \" +\r\n          f_ret.outFences.join();\r\n      }\r\n      this._postionbar.updatePoint(pt, false);\r\n      this._postionbar.updateTrack(pt.id, [pt], true, true, true);\r\n    },\r\n\r\n    _loadAllDevices() {\r\n      let url = this.options.domain + \"/BAISTMonitor/getBdLocateList.action\";\r\n      getBdLocateList(url)\r\n        .then(res => {\r\n          for (var i = 0; i < data.data.length; i++) {\r\n            var obj = data.data[i];\r\n            if (obj.gpstime != \"\") {\r\n              this.updateDevice(obj);\r\n            }\r\n          }\r\n        })\r\n        .catch(err => console.log(\"err\"));\r\n    },\r\n\r\n    _onNavbarRoadnet(state) {\r\n      if (state == 1) {\r\n        this._streetMapLayerGroup.addTo(this.map).setZIndex(1);\r\n      } else {\r\n        this._streetMapLayerGroup.remove();\r\n      }\r\n    },\r\n\r\n    _onNavbarSatmap(state) {\r\n      if (state == 1) {\r\n        this._vectorBaseMapLayer.remove();\r\n        this._satBaseMapLayerGroup.addTo(this.map).setZIndex(0);\r\n      } else {\r\n        this._satBaseMapLayerGroup.remove();\r\n        this._vectorBaseMapLayer.addTo(this.map).setZIndex(0);\r\n        if (this.map.hasLayer(this._streetMapLayerGroup)) {\r\n          this._streetMapLayerGroup.remove();\r\n        }\r\n      }\r\n    },\r\n\r\n    _onNavbarDevMan(state) {\r\n      if (state == 1) {\r\n        this._loadAllDevices();\r\n        this._postionbar.addTo(this.map);\r\n      } else {\r\n        this._postionbar.remove();\r\n      }\r\n    },\r\n\r\n    _onNavbarFence(state) {\r\n      if (state == 1) {\r\n        this._fenceBar.addTo(this.map);\r\n      } else {\r\n        this._fenceBar.remove();\r\n      }\r\n    },\r\n\r\n    _onNavbarTool(state) {\r\n      if (state == 1) {\r\n        this._measureRuler.addTo(this.map);\r\n        this._measureArea.addTo(this.map);\r\n      } else {\r\n        this._measureArea.remove();\r\n        this._measureRuler.remove();\r\n      }\r\n    },\r\n\r\n    _onNavbarSetting() {\r\n      this.showSettingDialog();\r\n    },\r\n\r\n    _onNavbarTest() {\r\n      var lat = 34.3468421,\r\n        lon = 108.9365887;\r\n\r\n      var devs_json =\r\n        '{\"data\":[{\"altitude\":\"0.0\",\"cardNum\":\"142342\",\"gpstime\":\"2019-04-02 16:19:55\",\"latitude\":\"34.1595\",\"latitudefloat\":34.1595,\"longitude\":\"108.97702\",\"longitudefloat\":108.97702,\"name\":\"142342\",\"numInZone\":\"---\",\"remark\":\"\",\"sjState\":0,\"sjStatedesc\":\"未安装，未引导\",\"status\":0,\"terminalAeraId\":null,\"terminalAeraName\":\"朝鲜\",\"txLevel\":null,\"type\":1,\"typeDesc\":\"区内终端\",\"tzState\":0,\"tzStatedesc\":\"出厂状态，未安装任何数据\",\"uuid\":\"91623a81-5d61-44bd-a69b-86c496989556\",\"zone\":\"---\"},{\"altitude\":\"0.0\",\"cardNum\":\"142339\",\"gpstime\":\"2019-05-29 11:23:09\",\"latitude\":\"34.1595\",\"latitudefloat\":34.1595,\"longitude\":\"108.97707\",\"longitudefloat\":108.97707,\"name\":\"142339\",\"numInZone\":\"---\",\"remark\":\"\",\"sjState\":0,\"sjStatedesc\":\"未安装，未引导\",\"status\":0,\"terminalAeraId\":null,\"terminalAeraName\":\"实时\",\"txLevel\":null,\"type\":1,\"typeDesc\":\"区内终端\",\"tzState\":0,\"tzStatedesc\":\"出厂状态，未安装任何数据\",\"uuid\":\"94b9dd71-09b8-4be2-940d-a346ddc3ce0e\",\"zone\":\"---\"},{\"altitude\":\"0.0\",\"cardNum\":\"142338\",\"gpstime\":\"2019-05-29 16:54:54\",\"latitude\":\"34.159527\",\"latitudefloat\":34.159527,\"longitude\":\"108.97713\",\"longitudefloat\":108.97713,\"name\":\"142338\",\"numInZone\":\"---\",\"remark\":\"\",\"sjState\":0,\"sjStatedesc\":\"未安装，未引导\",\"status\":0,\"terminalAeraId\":null,\"terminalAeraName\":\"陕西省\",\"txLevel\":null,\"type\":1,\"typeDesc\":\"区内终端\",\"tzState\":0,\"tzStatedesc\":\"出厂状态，未安装任何数据\",\"uuid\":\"d5321496-85a9-486e-9070-a459ee4f3c4d\",\"zone\":\"---\"},{\"altitude\":\"0.0\",\"cardNum\":\"142346\",\"gpstime\":\"2019-04-01 14:22:43\",\"latitude\":\"34.1595\",\"latitudefloat\":34.1595,\"longitude\":\"108.97702\",\"longitudefloat\":108.97702,\"name\":\"142346\",\"numInZone\":\"---\",\"remark\":\"\",\"sjState\":0,\"sjStatedesc\":\"未安装，未引导\",\"status\":0,\"terminalAeraId\":null,\"terminalAeraName\":\"平壤大使馆\",\"txLevel\":null,\"type\":1,\"typeDesc\":\"区内终端\",\"tzState\":0,\"tzStatedesc\":\"出厂状态，未安装任何数据\",\"uuid\":\"f3639dbd-36a0-4959-8b99-dff890d3d87f\",\"zone\":\"---\"}],\"message\":null,\"status\":0}';\r\n      var centre_json =\r\n        '{\"data\":{\"altitude\":\"0\",\"gpstime\":\"2019-05-29 17:28:57.0\",\"latitude\":\"34.1595\",\"longitude\":\"108.977104\",\"name\":null,\"number\":null,\"uuid\":\"b2d72703-c4e6-4457-ad65-e4c4c7b66142\"},\"message\":\"定位成功\",\"status\":1}';\r\n\r\n      var devs = JSON.parse(devs_json).data;\r\n      var center = JSON.parse(centre_json).data;\r\n      for (var i = 0, len = devs.length; i < len; i++) {\r\n        var dev = devs[i];\r\n        this.updateDevice(dev);\r\n      }\r\n      this.updateCenter(center);\r\n\r\n      var devs_json =\r\n        '{\"data\":[{\"altitude\":\"0.0\",\"cardNum\":\"142342\",\"gpstime\":\"2019-04-02 16:19:55\",\"latitude\":\"34.1605\",\"latitudefloat\":34.1595,\"longitude\":\"108.97702\",\"longitudefloat\":108.97702,\"name\":\"142342\",\"numInZone\":\"---\",\"remark\":\"\",\"sjState\":0,\"sjStatedesc\":\"未安装，未引导\",\"status\":0,\"terminalAeraId\":null,\"terminalAeraName\":\"朝鲜\",\"txLevel\":null,\"type\":1,\"typeDesc\":\"区内终端\",\"tzState\":0,\"tzStatedesc\":\"出厂状态，未安装任何数据\",\"uuid\":\"91623a81-5d61-44bd-a69b-86c496989556\",\"zone\":\"---\"},{\"altitude\":\"0.0\",\"cardNum\":\"142339\",\"gpstime\":\"2019-05-29 11:23:09\",\"latitude\":\"34.1605\",\"latitudefloat\":34.1595,\"longitude\":\"108.97707\",\"longitudefloat\":108.97707,\"name\":\"142339\",\"numInZone\":\"---\",\"remark\":\"\",\"sjState\":0,\"sjStatedesc\":\"未安装，未引导\",\"status\":0,\"terminalAeraId\":null,\"terminalAeraName\":\"实时\",\"txLevel\":null,\"type\":1,\"typeDesc\":\"区内终端\",\"tzState\":0,\"tzStatedesc\":\"出厂状态，未安装任何数据\",\"uuid\":\"94b9dd71-09b8-4be2-940d-a346ddc3ce0e\",\"zone\":\"---\"},{\"altitude\":\"0.0\",\"cardNum\":\"142338\",\"gpstime\":\"2019-05-29 16:54:54\",\"latitude\":\"34.160527\",\"latitudefloat\":34.159527,\"longitude\":\"108.97713\",\"longitudefloat\":108.97713,\"name\":\"142338\",\"numInZone\":\"---\",\"remark\":\"\",\"sjState\":0,\"sjStatedesc\":\"未安装，未引导\",\"status\":0,\"terminalAeraId\":null,\"terminalAeraName\":\"陕西省\",\"txLevel\":null,\"type\":1,\"typeDesc\":\"区内终端\",\"tzState\":0,\"tzStatedesc\":\"出厂状态，未安装任何数据\",\"uuid\":\"d5321496-85a9-486e-9070-a459ee4f3c4d\",\"zone\":\"---\"},{\"altitude\":\"0.0\",\"cardNum\":\"142346\",\"gpstime\":\"2019-04-01 14:22:43\",\"latitude\":\"34.1605\",\"latitudefloat\":34.1595,\"longitude\":\"108.97702\",\"longitudefloat\":108.97702,\"name\":\"142346\",\"numInZone\":\"---\",\"remark\":\"\",\"sjState\":0,\"sjStatedesc\":\"未安装，未引导\",\"status\":0,\"terminalAeraId\":null,\"terminalAeraName\":\"平壤大使馆\",\"txLevel\":null,\"type\":1,\"typeDesc\":\"区内终端\",\"tzState\":0,\"tzStatedesc\":\"出厂状态，未安装任何数据\",\"uuid\":\"f3639dbd-36a0-4959-8b99-dff890d3d87f\",\"zone\":\"---\"}],\"message\":null,\"status\":0}';\r\n      var centre_json =\r\n        '{\"data\":{\"altitude\":\"0\",\"gpstime\":\"2019-05-29 17:28:57.0\",\"latitude\":\"34.1605\",\"longitude\":\"108.977104\",\"name\":null,\"number\":null,\"uuid\":\"b2d72703-c4e6-4457-ad65-e4c4c7b66142\"},\"message\":\"定位成功\",\"status\":1}';\r\n\r\n      var devs = JSON.parse(devs_json).data;\r\n      var center = JSON.parse(centre_json).data;\r\n      for (var i = 0, len = devs.length; i < len; i++) {\r\n        var dev = devs[i];\r\n        this.updateDevice(dev);\r\n      }\r\n    },\r\n    _notify(msg) {\r\n      $.notify(\r\n        {\r\n          //title: 'hahha',\r\n          icon: \"fa fa-exclamation-triangle\",\r\n          message: msg\r\n        },\r\n        {\r\n          type: \"danger\",\r\n          offset: {\r\n            x: 70,\r\n            y: 60\r\n          },\r\n          //delay:1000,\r\n          newest_on_top: true\r\n        }\r\n      );\r\n    },\r\n    _tranPosition(objs) {\r\n      for (var i in objs) {\r\n        var segs = objs[i].position.split(\",\");\r\n        objs[i].lat = segs[0];\r\n        objs[i].lng = segs[1];\r\n      }\r\n      return objs;\r\n    },\r\n    showSettingDialog() {\r\n      var content = L.DomUtil.create(\"div\", \"\");\r\n      $(content).css(\"z-index\", \"100\");\r\n\r\n      var div = L.DomUtil.create(\"div\", \"input-group\", content);\r\n      var span = L.DomUtil.create(\"span\", \"input-group-addon\", div);\r\n      span.innerHTML = this.local[this.options.lng].language_sel_lab;\r\n      var input = L.DomUtil.create(\"select\", \"form-control\", div);\r\n      $(input).attr({\r\n        id: \"map_setting_dialog_lng_input\"\r\n      });\r\n      $(input).append(\r\n        \"<option>\" +\r\n          this.local[this.options.lng].language_sel_item_cn +\r\n          \"</option>\"\r\n      );\r\n      $(input).append(\r\n        \"<option>\" +\r\n          this.local[this.options.lng].language_sel_item_en +\r\n          \"</option>\"\r\n      );\r\n      //$(input).val();\r\n\r\n      $(content).dialog({\r\n        autoOpen: true,\r\n        title: this.local[this.options.lng].setting_dlg_title,\r\n        modal: true,\r\n        resizable: false,\r\n        buttons: [\r\n          {\r\n            text: this.local[this.options.lng].setting_dlg_btn_save,\r\n            click: function() {\r\n              var lng = $(\"#map_setting_dialog_lng_input\").val();\r\n              if (\r\n                lng == g_Main.local[g_Main.options.lng].language_sel_item_cn\r\n              ) {\r\n                g_Main.options.lng = \"cn\";\r\n              } else if (\r\n                lng == g_Main.local[g_Main.options.lng].language_sel_item_en\r\n              ) {\r\n                g_Main.options.lng = \"en\";\r\n              }\r\n\r\n              g_Main._saveDataToServer();\r\n              $(this).dialog(\"destroy\");\r\n            }\r\n          },\r\n          {\r\n            text: this.local[this.options.lng].setting_dlg_btn_cancel,\r\n            click: function() {\r\n              $(this).dialog(\"destroy\");\r\n            }\r\n          }\r\n        ]\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.map {\r\n  display: flex;\r\n  height: 100vh;\r\n\r\n  .my-map {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map\",attrs:{\"id\":\"map-box\"}},[_c('div',{staticClass:\"my-map\",attrs:{\"id\":\"mymap\"}})])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./terminalHistoryTrack.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./terminalHistoryTrack.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./terminalHistoryTrack.vue?vue&type=template&id=335ff838&scoped=true&\"\nimport script from \"./terminalHistoryTrack.vue?vue&type=script&lang=js&\"\nexport * from \"./terminalHistoryTrack.vue?vue&type=script&lang=js&\"\nimport style0 from \"./terminalHistoryTrack.vue?vue&type=style&index=0&id=335ff838&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"335ff838\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\n\nvar anObject = require('./_an-object');\nvar sameValue = require('./_same-value');\nvar regExpExec = require('./_regexp-exec-abstract');\n\n// @@search logic\nrequire('./_fix-re-wks')('search', 1, function (defined, SEARCH, $search, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = defined(this);\n      var fn = regexp == undefined ? undefined : regexp[SEARCH];\n      return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@search\n    function (regexp) {\n      var res = maybeCallNative($search, regexp, this);\n      if (res.done) return res.value;\n      var rx = anObject(regexp);\n      var S = String(this);\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./terminalHistoryTrack.vue?vue&type=style&index=0&id=335ff838&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./terminalHistoryTrack.vue?vue&type=style&index=0&id=335ff838&lang=scss&scoped=true&\""],"sourceRoot":""}